webpackJsonp([17],{IkRQ:function(t,e){},raBN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("6Xek"),c=s("BQAo"),a=s("vMd9"),n={name:"store",data:function(){return{score:9,result:{},popupVisible:!1,addressVisible:!1,distributionMode:{name:"送货上门",value:0},delivery:"请选择",address:null,addressList:[]}},components:{},methods:{cancel:function(){c.a.alert("确定取消订单!").then(function(){return console.info(1)}).catch(function(t){console.log(t)})},confirm:function(){"请选择"!=this.delivery?this.address?Object(i.c)({storeId:this.result.storeId,distributionMode:this.distributionMode.value,shippingId:this.address.shippingId,deliveryTime:new Date(this.delivery).valueOf()}).then(function(t){200==t.code&&Object(c.a)("您已下单成功!")}):c.a.confirm("请填写收货地址!"):c.a.confirm("请选择送达时间!")},changeDistribution:function(t){this.distributionMode=t,this.popupVisible=!1},handleChange:function(t){this.delivery=a.a.toDate(t,"yyyy-MM-dd HH:mm")},changeAddress:function(t){this.address={receiverName:t.receiverName,receiverMobile:t.receiverMobileNo,receiverProvince:t.provinceName,receiverCity:t.cityName,receiverDistrict:t.districtName,receiverAddress:t.detailAddress,shippingId:t.id},this.addressVisible=!1},popupAddresses:function(){this.addressVisible=!0,this.getQueryUserShippingListWithPage()},datetimeOpen:function(){this.$refs.datetime.open()},jump:function(t){this.$router.push(t)},getQueryUserShippingListWithPage:function(){var t=this;Object(i.p)({pageSize:10,pageNum:1}).then(function(e){console.info(e),t.addressList=e.result.list})},getConfirmationOrderDoc:function(){var t=this;Object(i.b)({storeId:1}).then(function(e){t.result=e.result,t.address=e.result.shippingVo,t.address.shippingId=e.result.shippingId})}},mounted:function(){this.getConfirmationOrderDoc({storeId:"1"})}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hc-confirm-order"},[s("mt-header",{staticClass:"hc-header",attrs:{fixed:"",title:"确认下单"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1),t._v(" "),s("div",{staticClass:"hc-content"},[s("mt-cell",{attrs:{title:"商品配送方式",value:t.distributionMode.name,"is-link":""},nativeOn:{click:function(e){t.popupVisible=!0}}}),t._v(" "),s("mt-cell",{attrs:{title:"商品送达时间",value:t.delivery,"is-link":""},nativeOn:{click:function(e){return t.datetimeOpen(e)}}}),t._v(" "),null==t.address?s("mt-cell",{attrs:{title:"收货地址",value:"请选择","is-link":""},nativeOn:{click:function(e){return t.popupAddresses(e)}}}):t._e(),t._v(" "),null!=t.address?s("mt-cell",{attrs:{title:t.address.receiverName+" "+t.address.receiverMobile,label:t.address.receiverProvince+" "+t.address.receiverCity+" "+t.address.receiverDistrict+t.address.receiverAddress,"is-link":""},nativeOn:{click:function(e){return t.popupAddresses(e)}}}):t._e(),t._v(" "),s("div",{staticClass:"hc-panel"},[s("mt-cell",{attrs:{title:"配送商店","is-link":""},nativeOn:{click:function(e){t.jump("/mdcOrder/storeList")}}}),t._v(" "),s("div",{staticClass:"hc-flex "},[s("div",{staticClass:"hc-flex-item hc-text-center"},[s("div",{staticClass:"hc-icon",style:{backgroundImage:"url("+t.result.omcStoreVo.imgUrl+")"}})]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-3"},[s("h2",[t._v(t._s(t.result.omcStoreVo.shortName))]),t._v(" "),s("span",[t._v(t._s(t.result.omcStoreVo.adress))])]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-2 hc-text-center"},[s("mt-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){t.jump("/mdcOrder/store")}}},[t._v("查看店铺")])],1)])],1),t._v(" "),s("div",{staticClass:"hc-store-list"},t._l(t.result.orderItemVoList,function(e,i){return s("div",{key:i,staticClass:"hc-store-item "},[s("div",{staticClass:"hc-flex"},[s("div",{staticClass:"hc-flex-item"},[s("img",{staticClass:"thrume",attrs:{src:e.productImage,alt:""}})]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-2"},[s("div",{staticClass:"hc-store-content"},[s("h3",[t._v(t._s(e.productName))]),t._v(" "),s("p",[t._v(t._s(e.subtitle))]),t._v(" "),s("p",[t._v("规格："+t._s(e.wineMl)+"ml "+t._s(e.nums)+"瓶/件")]),t._v(" "),s("div",{staticClass:"hc-flex"},[s("div",{staticClass:"hc-flex-item "},[t._v("\n                              ￥ "),s("span",{staticClass:"price"},[t._v(t._s(e.currentUnitPrice))]),t._v(" X"+t._s(e.quantity)+"\n                          ")])])])])])])})),t._v(" "),s("div",{staticClass:"hc-price"},[s("div",{staticClass:"hc-flex"},[s("div",{staticClass:"hc-flex-item"},[t._v("\n                     总计金额\n                 ")]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-text-right"},[t._v("\n                     ￥"),s("span",{staticClass:"hc-momeny"},[t._v(t._s(t.result.payment))])])])])],1),t._v(" "),s("div",{staticClass:"hc-footer"},[s("div",{staticClass:"hc-flex"},[s("div",{staticClass:"hc-flex-item hc-text-center",on:{click:t.cancel}},[t._v("\n              取消订单\n          ")]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-text-center confirm",on:{click:t.confirm}},[t._v("\n              确认订单\n          ")])])]),t._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("div",{staticClass:"hc-popup"},[s("div",{staticClass:"hc-popup-title"},[t._v("配送方式选择")]),t._v(" "),s("div",{staticClass:"hc-popup-content"},[s("div",{staticClass:"hc-flex ",on:{click:function(e){t.changeDistribution({name:"送货上门",value:0})}}},[s("div",{staticClass:"hc-flex-item hc-text-center"},[s("icon",{staticClass:"gray",attrs:{value:"ziyuan11"}})],1),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-3"},[s("h2",[t._v("送货上门")]),t._v(" "),s("span",[t._v("门店自动送货到你的收获地址")])])]),t._v(" "),s("div",{staticClass:"hc-flex ",on:{click:function(e){t.changeDistribution({name:"自提",value:1})}}},[s("div",{staticClass:"hc-flex-item hc-text-center"},[s("icon",{staticClass:"orange",attrs:{value:"lujing13"}})],1),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-3"},[s("h2",[t._v("自提")]),t._v(" "),s("span",[t._v("你需要亲自到下单门店取货")])])])])])]),t._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:t.addressVisible,callback:function(e){t.addressVisible=e},expression:"addressVisible"}},[s("div",{staticClass:"hc-popup"},[s("div",{staticClass:"hc-popup-title"},[t._v("配送地址选择")]),t._v(" "),s("div",{staticClass:"hc-popup-content"},[s("div",{staticClass:"hc-address"},[s("div",{staticClass:"hc-address-body"},[t._l(t.addressList,function(e,i){return t.addressList.length>0?s("div",{key:i,staticClass:"hc-address-item",on:{click:function(s){t.changeAddress(e)}}},[s("h2",[t._v(t._s(e.receiverName)+" "),s("span",[t._v(t._s(e.receiverMobileNo))])]),t._v(" "),s("span",[t._v(t._s(e.provinceName)+" "+t._s(e.cityName)+" "+t._s(e.districtName)+" "+t._s(e.detailAddress))])]):t._e()}),t._v(" "),t.addressList.length<=0?s("div",{staticClass:"hc-address-no"},[s("icon",{attrs:{value:"lujing12",color:"e9e9e9"}}),t._v(" "),s("p",[t._v("暂无收货地址，请添加您的详细收货地址！")])],1):t._e()],2),t._v(" "),s("div",{staticClass:"hc-address-add"},[s("mt-button",{on:{click:function(e){t.jump("/mdcOrder/addAddress")}}},[t._v("新建地址")])],1)])])])]),t._v(" "),s("datetime",{ref:"datetime",on:{confirm:t.handleChange}})],1)},staticRenderFns:[]};var l=s("VU/8")(n,r,!1,function(t){s("IkRQ")},null,null);e.default=l.exports}});
//# sourceMappingURL=17.ecb411171d315e685d20.js.map