webpackJsonp([4],{"/vcp":function(t,e){},"21Vv":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=s("GkCN"),a=s("aXMM"),i=s("WTCE"),r=s("6Xek"),n={name:"store",data:function(){return{score:9,result:{},popupRoleVisible:!1,userId:"",storeId:"",productId:"",tempNum:2}},components:{Star:c.default,HcCartBtn:a.a,hcShopCart:i.a},methods:{handleItem:function(t){this.result.categoryId=t.id},getProductList:function(){var t=this;Object(r.n)().then(function(e){console.info(e),t.result=e.result,setTimeout(function(){t.$refs.hcCart.getCartVo()},0)})},subtractFromCart:function(){this.tempNum-=1,this.$refs.hcCart.updataCart({}),this.tempNum<=0&&(this.tempNum=0)},addToCart:function(){this.tempNum+=1,this.$refs.hcCart.updataCart({})},toGoodsDetails:function(){this.$router.push({path:"/mdcOrder/goodsDetails"})}},mounted:function(){this.getProductList({storeId:"1"})}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mt-header",{staticClass:"hc-header",attrs:{title:t.result.store.shortName}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"}),t._v(" "),s("Star",{attrs:{slot:"right",score:t.score},slot:"right"})],1),t._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"hc-main-content"},[s("div",{staticClass:"hc-main-item hc-pr hc-clearfix"},[s("div",{staticClass:"hc-main-sign hc-pa",style:{backgroundImage:"url("+t.result.store.storeDescription.imgUrl+")"}}),t._v(" "),s("div",{staticClass:"hc-main-introduce hc-fl"},[s("div",{staticClass:"hc-main-address hc-cb3 hc-f12"},[s("span",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-lujing6"}})])]),t._v("\n               "+t._s(t.result.store.storeDescription.adress))]),t._v(" "),s("div",{staticClass:"hc-main-address hc-cb3 hc-f12"},[s("span",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ziyuan20"}})])]),t._v("\n               0588-3454325\n             ")]),t._v(" "),s("div",{staticClass:"hc-main-label"},[s("div",{staticClass:"hc-main-label-1"},[s("div",{staticClass:"hc-main-label-icon hc-cfff hc-inlineblock"},[s("svg",{staticClass:"icon hc-f14",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ziyuan1"}})])]),t._v("\n                 一箱起送\n               ")]),t._v(" "),s("div",{staticClass:"hc-main-label-1 hc-label2-2"},[t._v("\n                 支持自取\n               ")])])])])]),t._v(" "),s("div",{staticClass:"hc-nav-content hc-f14"},[s("mt-swipe",{attrs:{auto:0,"show-indicators":!1}},[s("mt-swipe-item",t._l(t.result.categoryList,function(e,c){return s("div",{key:c,class:{"hc-nav-item":!0,"hc-text-center":!0,active:t.result.categoryId==e.id},on:{click:function(s){t.handleItem(e)}}},[s("div",{staticClass:"hc-w100-per"},[s("span",{staticClass:"hc-nav-items"},[t._v(t._s(e.name))])])])}))],1)],1),t._v(" "),s("div",{staticClass:"hc-store-list"},t._l(t.result.productList,function(e,c){return s("div",{key:c,staticClass:"hc-store-item ",on:{click:t.toGoodsDetails}},[s("div",{staticClass:"hc-flex"},[s("div",{staticClass:"hc-flex-item"},[s("img",{staticClass:"thrume",attrs:{src:e.mainImage,alt:""}})]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-flex-item-2"},[s("div",{staticClass:"hc-store-content"},[s("h3",[t._v(t._s(e.productName))]),t._v(" "),s("p",[t._v(t._s(e.spec.winePercent)+"度"+t._s(e.spec.material)+" "+t._s(e.spec.wineMl)+"ml "+t._s(e.spec.nums)+"瓶")]),t._v(" "),s("p",[t._v(t._s(e.subtitle))]),t._v(" "),s("div",{staticClass:"hc-flex hc-store-price"},[s("div",{staticClass:"hc-flex-item "},[t._v("\n                     ￥ "),s("span",{staticClass:"price"},[t._v(t._s(e.price))])]),t._v(" "),s("div",{staticClass:"hc-flex-item hc-text-right"},[s("hc-cart-btn",{staticClass:"hc-cart-btn",attrs:{tempNum:t.tempNum},on:{subtractFromCart:t.subtractFromCart,addToCart:t.addToCart}})],1)])])])])])}))]),t._v(" "),s("hc-shop-cart",{ref:"hcCart",attrs:{needHide:!0,userId:t.userId,storeId:t.storeId,productId:t.productId},model:{value:t.popupRoleVisible,callback:function(e){t.popupRoleVisible=e},expression:"popupRoleVisible"}})],1)},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("GqhX")},null,null);e.default=l.exports},GqhX:function(t,e){},"K+tR":function(t,e){},WTCE:function(t,e,s){"use strict";var c=s("BQAo"),a=s("Au9i"),i={props:{value:{},isMain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},productId:{type:String,default:""}},data:function(){return{checkVal:this.value}},computed:{},watch:{value:function(t){this.checkVal=t},checkVal:function(t){this.$emit("input",t)}},methods:{clickMe:function(){var t=0;this.checkVal&&(t=1),this.$emit("isCheckAll",this.isMain,this.productId,t)}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hc-com-checkbox"},[s("label",{attrs:{for:"label"},on:{change:t.clickMe}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkVal,expression:"checkVal"}],staticClass:"hc-checkbox",attrs:{disabled:t.disabled,type:"checkbox",id:"label"},domProps:{checked:Array.isArray(t.checkVal)?t._i(t.checkVal,null)>-1:t.checkVal},on:{change:function(e){var s=t.checkVal,c=e.target,a=!!c.checked;if(Array.isArray(s)){var i=t._i(s,null);c.checked?i<0&&(t.checkVal=s.concat([null])):i>-1&&(t.checkVal=s.slice(0,i).concat(s.slice(i+1)))}else t.checkVal=a}}})])])},staticRenderFns:[]};var n=s("VU/8")(i,r,!1,function(t){s("/vcp")},null,null).exports,o=s("aXMM"),l=s("6Xek"),u={name:"hc-popup",mixins:[a.Popup],props:{modal:{default:!0},needHide:{type:Boolean,default:!1},hcTitle:{type:String,default:""},modalFade:{default:!0},lockScroll:{default:!0},closeOnClickModal:{default:!0},popupTransition:{type:String,default:"popup-slide"},position:{type:String,default:"bottom"},userId:{type:String,default:""},storeId:{type:String,default:""},productId:{type:String,default:""}},components:{HcCheckbox:n,HcCartBtn:o.a},data:function(){return{currentValue:!1,currentTransition:this.popupTransition,cartShow:!0,tempIsCheckAll:!1,checkValAllDisabled:!1,hcPopup:[]}},computed:{totalNum:function(){var t=0;return this.hcPopup.forEach(function(e){1==e.checked&&(t+=e.quantity)}),t},totalPrice:function(){var t=0;return this.hcPopup.forEach(function(e){e.checked&&(t+=e.quantity*e.productPrice)}),t},checkValAll:{get:function(){var t=this,e=!0;return this.hcPopup.length<=0?(this.checkValAllDisabled=!0,!1):(this.checkValAllDisabled=!1,this.hcPopup.forEach(function(s){s.checked||(e=!1,t.temp=!0)}),e)},set:function(t,e){this.tempIsCheckAll||this.hcPopup.forEach(function(e){e.checked=t})}}},watch:{currentValue:function(t){this.$emit("input",t)},value:function(t){this.currentValue=t},totalNum:function(t){0==t&&this.needHide&&(this.currentValue=!1)}},beforeMount:function(){"popup-fade"!==this.popupTransition&&(this.currentTransition="popup-slide-"+this.position)},methods:{showCart:function(){this.currentValue=!this.currentValue},cartSubtract:function(t){var e=this;this.hcPopup.forEach(function(s,c){s.id==t&&(s.quantity-=1,e.orderUpdateCart(s.quantity),0==s.quantity&&e.hcPopup.splice(c,1))})},cartAdd:function(t){var e=this;this.hcPopup.forEach(function(s,c){s.id==t&&(s.quantity+=1,e.orderUpdateCart(s.quantity),0==s.quantity&&e.hcPopup.splice(c,1))})},updataCart:function(t){},emptyCart:function(){var t=this;this.hcPopup.length<=0?c.a.confirm("您的购物车还没有商品哦~~"):c.a.alert("确定清空购物车？").then(function(){t.deleteCartProduct()})},isCheckAll:function(t,e,s){var c=this;if(this.tempIsCheckAll=!0,t)return this.selectOrUnSelect(s),void(this.tempIsCheckAll=!1);this.selectOrUnSelect(s,e),this.hcPopup.forEach(function(t){t.checked||(c.tempIsCheckAll=!1)})},getCartVo:function(){var t=this;Object(l.f)({userId:this.userId,storeId:this.storeId}).then(function(e){t.hcPopup=e.result.cartProductVoList})},orderAddCart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(l.l)({userId:this.userId,storeId:this.storeId,productId:this.productId,count:e}).then(function(e){t.getCartVo()})},orderUpdateCart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(l.m)({userId:this.userId,storeId:this.storeId,productId:this.productId,count:e}).then(function(){t.getCartVo()})},deleteCartProduct:function(){var t=this,e="";this.hcPopup.forEach(function(t){e+=t.productId+","}),e=e.substr(0,e.length-1),Object(l.e)({userId:this.userId,storeId:this.storeId,productIds:e}).then(function(){t.hcPopup=[],Object(c.a)("成功清空购物车"),t.showCart()})},selectOrUnSelect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(l.q)({userId:this.userId,storeId:this.storeId,productId:e,checked:t}).then(function(){})}},mounted:function(){this.value&&(this.rendered=!0,this.currentValue=!0,this.open())}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hc-cart-popup"},[s("transition",{attrs:{name:t.currentTransition}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticClass:"mint-popup hc-popup",class:[t.position?"mint-popup-"+t.position:""]},[s("div",{staticClass:"hc-popup-box"},[s("div",{staticClass:"hc-cart-header",attrs:{id:"hcPopupTitle"}},[s("div",{staticClass:"hc-cart-checkall"},[s("hc-checkbox",{attrs:{disabled:t.checkValAllDisabled,isMain:!0},on:{isCheckAll:t.isCheckAll},model:{value:t.checkValAll,callback:function(e){t.checkValAll=e},expression:"checkValAll"}})],1),t._v(" "),s("div",{staticClass:"hc-fr hc-empty",on:{click:t.emptyCart}},[s("svg",{staticClass:"icon hc-active",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-lujing10"}})]),t._v("\n            清空购物车\n          ")])]),t._v(" "),s("div",{staticClass:"hc-popup-content"},[t._l(t.hcPopup,function(e,c){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.hcPopup.length>=1,expression:"hcPopup.length>=1"}],key:c,staticClass:"hc-popup-item hc-clearfix"},[s("div",[s("div",{staticClass:"hc-cart-check hc-fl"},[s("hc-checkbox",{attrs:{productId:e.productId},on:{isCheckAll:t.isCheckAll},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}})],1),t._v(" "),s("div",{staticClass:"hc-cart-goods hc-pr"},[s("div",{staticClass:"hc-cart-goods-img"},[s("img",{attrs:{src:e.productMainImage,alt:""}})]),t._v(" "),s("div",{staticClass:"hc-cart-intr"},[s("div",{staticClass:"hc-f14  hc-one-in"},[t._v(t._s(e.productName))]),t._v(" "),s("div",{staticClass:"hc-c999"},[t._v(t._s(e.quantity))]),t._v(" "),s("div",{staticClass:"hc-cart-cost"},[s("span",{staticClass:"hc-f12"},[t._v("￥")]),s("span",{staticClass:"hc-f18 hc-cost"},[t._v(t._s(e.productPrice))])])]),t._v(" "),s("hc-cart-btn",{staticClass:"hc-cost-cart",attrs:{tempNum:e.quantity},on:{subtractFromCart:function(s){t.cartSubtract(e.id)},addToCart:function(s){t.cartAdd(e.id)}}})],1)])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hcPopup.length<=0,expression:"hcPopup.length<=0"}],staticClass:"hc-cart-empty"},[s("svg",{staticClass:"icon hc-active",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ziyuan"}})]),t._v(" "),s("div",{staticClass:"hc-f14"},[t._v("您的购物车空空如也")])])],2)])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum>0||!t.needHide,expression:"totalNum>0||!needHide"}],staticClass:"hc-cart-bottom"},[s("div",{staticClass:"hc-bottom-icon hc-pr",on:{click:t.showCart}},[s("svg",{staticClass:"icon",class:t.totalNum>=1?"hc-active":"",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-lujing8"}})]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.totalNum>=1,expression:"totalNum>=1"}],staticClass:"hc-cart-num hc-pa"},[t._v(t._s(t.totalNum))])]),t._v(" "),s("div",{staticClass:"hc-cart-center",on:{click:t.showCart}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum>=1,expression:"totalNum>=1"}]},[s("div",[s("span",{staticClass:"hc-f12"},[t._v("￥")]),s("span",{staticClass:"hc-f18 hc-cost"},[t._v(t._s(t.totalPrice))])]),t._v(" "),s("div",{staticClass:"hc-f12"},[t._v("共计"+t._s(t.totalNum)+"件商品")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum<=0,expression:"totalNum<=0"}],staticClass:"hc-f16"},[t._v("购物车")])]),t._v(" "),s("div",{staticClass:"hc-cart-btn",on:{click:t.showCart}},[t._v("立即下单")])])])],1)},staticRenderFns:[]};var d=s("VU/8")(u,h,!1,function(t){s("t9is")},"data-v-a5f6d10e",null).exports;s.d(e,"a",function(){return d})},aXMM:function(t,e,s){"use strict";var c={props:{tempNum:{type:Number,default:0}},methods:{subtractFromCart:function(){this.$emit("subtractFromCart")},addToCart:function(){this.$emit("addToCart")}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hc-cost-cart hc-pa"},[s("transition",{attrs:{name:"hc-roll"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.tempNum>=1,expression:"tempNum>=1"}],staticClass:"hc-cart-icon",on:{click:t.subtractFromCart}},[s("svg",{staticClass:"icon hc-subtract",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ziyuan2"}})])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.tempNum>=1,expression:"tempNum>=1"}],staticClass:"hc-cart-icon hc-f16 hc-cart-num"},[t._v(t._s(t.tempNum))]),t._v(" "),s("div",{staticClass:"hc-cart-icon",on:{click:t.addToCart}},[s("svg",{staticClass:"icon hc-add",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ziyuan3"}})])])],1)},staticRenderFns:[]};var i=s("VU/8")(c,a,!1,function(t){s("K+tR")},null,null);e.a=i.exports},t9is:function(t,e){}});
//# sourceMappingURL=4.886c3facc933148dd251.js.map